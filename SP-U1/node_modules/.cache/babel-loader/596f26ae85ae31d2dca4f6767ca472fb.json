{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonButtons,IonContent,IonFooter,IonHeader,IonImg,IonInput,IonItem,IonLabel,IonLoading,IonPage,IonTextarea,IonTitle,IonToolbar,useIonAlert}from\"@ionic/react\";import{useRef,useState}from\"react\";import{useHistory}from\"react-router\";import{updateCourse,saveImage}from\"../../data/data-services\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CourseCenterTab=function CourseCenterTab(){var history=useHistory();var fileUpload=useRef(null);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),photo=_useState8[0],setPhoto=_useState8[1];// used to render platform specific alerts\nvar _useIonAlert=useIonAlert(),_useIonAlert2=_slicedToArray(_useIonAlert,1),present=_useIonAlert2[0];var doAddStuff=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$saveImage,imageData,imageError,_yield$updateCourse,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);// STEP 1 - SAVE IMAGE TO FIREBASE STORAGE\n_context.next=4;return saveImage(photo);case 4:_yield$saveImage=_context.sent;imageData=_yield$saveImage.data;imageError=_yield$saveImage.error;if(!imageError){_context.next=9;break;}throw imageError;case 9:_context.next=11;return updateCourse({name:name,description:description,imageData:imageData});case 11:_yield$updateCourse=_context.sent;data=_yield$updateCourse.data;error=_yield$updateCourse.error;setLoading(false);// if no error, then render home page\nhistory.replace(\"/home\");_context.next=24;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);setLoading(false);// error check for adding product...\nif(!_context.t0){_context.next=24;break;}present({header:\"Error Creating New stuff\",message:_context.t0===null||_context.t0===void 0?void 0:_context.t0.message,buttons:[\"OK\"]});return _context.abrupt(\"return\");case 24:case\"end\":return _context.stop();}}},_callee,null,[[0,18]]);}));return function doAddStuff(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\"}),/*#__PURE__*/_jsx(IonTitle,{children:\"COURSE CENTER\"})]})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,className:\"ion-padding\",children:[loading?/*#__PURE__*/_jsx(IonLoading,{isOpen:loading,message:\"Saving Record\"}):null,/*#__PURE__*/_jsx(\"p\",{children:photo?/*#__PURE__*/_jsx(\"div\",{style:{width:300},children:/*#__PURE__*/_jsx(IonImg,{src:URL.createObjectURL(photo)})}):null}),/*#__PURE__*/_jsx(\"input\",{ref:fileUpload,type:\"file\",style:{display:\"none\"},onChange:function onChange(e){var _e$target,_e$target2;return setPhoto((e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.files)?e===null||e===void 0?void 0:(_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.files[0]:null);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IonButton,{onClick:function onClick(){return fileUpload.current.click();},children:\"Get Image\"}),/*#__PURE__*/_jsx(IonButton,{onClick:function onClick(){return setPhoto(null);},children:\"Clear Image\"})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"fixed\",children:\"Name\"}),/*#__PURE__*/_jsx(IonInput,{onIonChange:function onIonChange(event){return setName(event.target.value);}})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"fixed\",children:\"Description\"}),/*#__PURE__*/_jsx(IonTextarea,{onIonChange:function onIonChange(event){return setDescription(event.target.value);}})]})]}),/*#__PURE__*/_jsxs(IonFooter,{children:[/*#__PURE__*/_jsx(IonButton,{onClick:function onClick(){return doAddStuff();},children:\"UPLOAD COURSE LISTING\"}),/*#__PURE__*/_jsx(IonButton,{color:\"danger\",onClick:function onClick(){return history.goBack();},children:\"CANCEL\"})]})]});};export default CourseCenterTab;","map":{"version":3,"sources":["/Users/tm/Documents/CODE/STUDYPELAGO/src/pages/tabs/CourseCenterTab.tsx"],"names":["IonButton","IonButtons","IonContent","IonFooter","IonHeader","IonImg","IonInput","IonItem","IonLabel","IonLoading","IonPage","IonTextarea","IonTitle","IonToolbar","useIonAlert","useRef","useState","useHistory","updateCourse","saveImage","CourseCenterTab","history","fileUpload","loading","setLoading","name","setName","description","setDescription","photo","setPhoto","present","doAddStuff","imageData","data","imageError","error","replace","header","message","buttons","width","URL","createObjectURL","display","e","target","files","current","click","event","value","goBack"],"mappings":"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","sourcesContent":["import {\n  IonButton,\n  IonButtons,\n  IonContent,\n  IonFooter,\n  IonHeader,\n  IonImg,\n  IonInput,\n  IonItem,\n  IonLabel,\n  IonLoading,\n  IonMenuButton,\n  IonPage,\n  IonSelect,\n  IonSelectOption,\n  IonTextarea,\n  IonTitle,\n  IonToolbar,\n  useIonAlert,\n} from \"@ionic/react\";\nimport { useRef, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { updateCourse, saveImage } from \"../../data/data-services\";\n\nconst CourseCenterTab: React.FC = () => {\n  const history = useHistory();\n\n  const fileUpload = useRef<any>(null);\n\n  const [loading, setLoading] = useState<any>(\"\");\n  const [name, setName] = useState<any>(\"\");\n  const [description, setDescription] = useState<any>(\"\");\n  const [photo, setPhoto] = useState<any>(null);\n\n  // used to render platform specific alerts\n  const [present] = useIonAlert();\n\n  const doAddStuff = async () => {\n    try {\n      setLoading(true);\n      // STEP 1 - SAVE IMAGE TO FIREBASE STORAGE\n      const { data: imageData, error: imageError } = await saveImage(photo);\n\n      if (imageError) {\n        throw imageError;\n      }\n\n      // STEP 2 - ADD PRODUCT INFO TO DATABASE, INCLUDE LINK\n      // TO IMAGE IN FIREBASE STORAGE\n      const { data, error } = await updateCourse({\n        name,\n        description,\n        imageData,\n      });\n      setLoading(false);\n      // if no error, then render home page\n      history.replace(\"/home\");\n    } catch (error) {\n      setLoading(false);\n\n      // error check for adding product...\n      if (error) {\n        present({\n          header: \"Error Creating New stuff\",\n          message: (error as any)?.message,\n          buttons: [\"OK\"],\n        });\n        return;\n      }\n    }\n  };\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\"></IonButtons>\n          <IonTitle>COURSE CENTER</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent fullscreen className=\"ion-padding\">\n        {loading ? (\n          <IonLoading isOpen={loading} message=\"Saving Record\" />\n        ) : null}\n        <p>\n          {photo ? (\n            <div\n              style={{\n                width: 300,\n              }}\n            >\n              <IonImg src={URL.createObjectURL(photo)} />\n            </div>\n          ) : null}\n        </p>\n        <input\n          ref={fileUpload}\n          type=\"file\"\n          style={{ display: \"none\" }}\n          onChange={(e) =>\n            setPhoto(e?.target?.files ? e?.target?.files[0] : null)\n          }\n        />\n        <div>\n          <IonButton onClick={() => fileUpload.current.click()}>\n            Get Image\n          </IonButton>\n          <IonButton onClick={() => setPhoto(null)}>Clear Image</IonButton>\n        </div>\n        <IonItem>\n          <IonLabel position=\"fixed\">Name</IonLabel>\n          <IonInput onIonChange={(event: any) => setName(event.target.value)} />\n        </IonItem>\n        <IonItem>\n          <IonLabel position=\"fixed\">Description</IonLabel>\n          <IonTextarea\n            onIonChange={(event: any) => setDescription(event.target.value)}\n          />\n        </IonItem>\n      </IonContent>\n      <IonFooter>\n        <IonButton onClick={() => doAddStuff()}>\n          UPLOAD COURSE LISTING\n        </IonButton>\n        <IonButton color=\"danger\" onClick={() => history.goBack()}>\n          CANCEL\n        </IonButton>\n      </IonFooter>\n    </IonPage>\n  );\n};\n\nexport default CourseCenterTab;\n"]},"metadata":{},"sourceType":"module"}