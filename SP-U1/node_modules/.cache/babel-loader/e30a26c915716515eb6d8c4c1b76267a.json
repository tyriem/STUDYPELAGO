{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonButtons,IonContent,IonHeader,IonMenuButton,IonPage,IonTitle,IonToolbar,useIonAlert}from\"@ionic/react\";import{useHistory}from\"react-router\";import\"./Page.css\";import{firebaseAuth,firebaseApp}from\"../store/firebase\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var history=useHistory();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userProfile=_useState2[0],setUserProfile=_useState2[1];// used to render platform specific alerts\nvar _useIonAlert=useIonAlert(),_useIonAlert2=_slicedToArray(_useIonAlert,1),present=_useIonAlert2[0];// get user profile information\nuseEffect(function(){var loadUserProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _firebaseAuth$current;var userId,dataResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userId=(_firebaseAuth$current=firebaseAuth.currentUser)===null||_firebaseAuth$current===void 0?void 0:_firebaseAuth$current.uid;console.log(\"User ID: \",userId);_context.next=4;return firebaseApp.firestore().collection(\"users\").doc(userId).get();case 4:dataResponse=_context.sent;// get the user data\nsetUserProfile(dataResponse.data());console.log(\"Data Response: \",dataResponse.data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function loadUserProfile(){return _ref.apply(this,arguments);};}();console.log(\"get user profile information...\");loadUserProfile();},[]);return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{class:\"ion-no-border\",children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonMenuButton,{color:\"light\"})}),/*#__PURE__*/_jsx(IonTitle,{children:\"STUDYPELAGO\"})]})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,className:\"ion-padding\",children:[/*#__PURE__*/_jsx(IonButton,{routerLink:\"/profile\",color:\"light\",children:\"Profile\"}),/*#__PURE__*/_jsxs(\"pre\",{children:[\"Welcome back, \",userProfile===null||userProfile===void 0?void 0:userProfile.firstName,\" \",userProfile===null||userProfile===void 0?void 0:userProfile.lastName]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Role: \",userProfile===null||userProfile===void 0?void 0:userProfile.role]}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(userProfile,null,2)})]})]});};export default HomePage;","map":{"version":3,"sources":["/Users/tm/Documents/CODE/STUDYPELAGO/src/pages/HomePage.tsx"],"names":["IonButton","IonButtons","IonContent","IonHeader","IonMenuButton","IonPage","IonTitle","IonToolbar","useIonAlert","useHistory","firebaseAuth","firebaseApp","useEffect","useState","HomePage","history","userProfile","setUserProfile","present","loadUserProfile","userId","currentUser","uid","console","log","firestore","collection","doc","get","dataResponse","data","firstName","lastName","role","JSON","stringify"],"mappings":"8cAAA,OACEA,SADF,CAEEC,UAFF,CAGEC,UAHF,CAIEC,SAJF,CAKEC,aALF,CAMEC,OANF,CAOEC,QAPF,CAQEC,UARF,CASEC,WATF,KAUO,cAVP,CAWA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAO,YAAP,CAEA,OAASC,YAAT,CAAuBC,WAAvB,KAA0C,mBAA1C,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,wFAEA,GAAMC,CAAAA,QAAkB,CAAG,QAArBA,CAAAA,QAAqB,EAAM,CAC/B,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CACA,cAAsCI,QAAQ,CAAM,IAAN,CAA9C,wCAAOG,WAAP,eAAoBC,cAApB,eAEA;AACA,iBAAkBT,WAAW,EAA7B,8CAAOU,OAAP,kBAEA;AACAN,SAAS,CAAC,UAAM,CACd,GAAMO,CAAAA,eAAe,0FAAG,qLAChBC,MADgB,wBACPV,YAAY,CAACW,WADN,gDACP,sBAA0BC,GADnB,CAEtBC,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBJ,MAAzB,EAFsB,sBAGKT,CAAAA,WAAW,CACnCc,SADwB,GAExBC,UAFwB,CAEb,OAFa,EAGxBC,GAHwB,CAGpBP,MAHoB,EAIxBQ,GAJwB,EAHL,QAGhBC,YAHgB,eAStB;AACAZ,cAAc,CAACY,YAAY,CAACC,IAAb,EAAD,CAAd,CACAP,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BK,YAAY,CAACC,IAA5C,EAXsB,sDAAH,kBAAfX,CAAAA,eAAe,0CAArB,CAcAI,OAAO,CAACC,GAAR,CAAY,iCAAZ,EACAL,eAAe,GAChB,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA,mBACE,MAAC,OAAD,yBACE,KAAC,SAAD,EAAW,KAAK,CAAC,eAAjB,uBACE,MAAC,UAAD,yBACE,KAAC,UAAD,EAAY,IAAI,CAAC,OAAjB,uBACE,KAAC,aAAD,EAAe,KAAK,CAAC,OAArB,EADF,EADF,cAIE,KAAC,QAAD,0BAJF,GADF,EADF,cAUE,MAAC,UAAD,EAAY,UAAU,KAAtB,CAAuB,SAAS,CAAC,aAAjC,wBACE,KAAC,SAAD,EAAW,UAAU,CAAE,UAAvB,CAAmC,KAAK,CAAC,OAAzC,qBADF,cAKE,wCACiBH,WADjB,SACiBA,WADjB,iBACiBA,WAAW,CAAEe,SAD9B,KAC0Cf,WAD1C,SAC0CA,WAD1C,iBAC0CA,WAAW,CAAEgB,QADvD,GALF,cAQE,+BAAWhB,WAAX,SAAWA,WAAX,iBAAWA,WAAW,CAAEiB,IAAxB,GARF,cAYE,qBAAMC,IAAI,CAACC,SAAL,CAAenB,WAAf,CAA4B,IAA5B,CAAkC,CAAlC,CAAN,EAZF,GAVF,GADF,CA2BD,CAtDD,CAwDA,cAAeF,CAAAA,QAAf","sourcesContent":["import {\n  IonButton,\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  useIonAlert,\n} from \"@ionic/react\";\nimport { useHistory } from \"react-router\";\nimport \"./Page.css\";\n\nimport { firebaseAuth, firebaseApp } from \"../store/firebase\";\nimport { useEffect, useState } from \"react\";\n\nconst HomePage: React.FC = () => {\n  const history = useHistory();\n  const [userProfile, setUserProfile] = useState<any>(null);\n\n  // used to render platform specific alerts\n  const [present] = useIonAlert();\n\n  // get user profile information\n  useEffect(() => {\n    const loadUserProfile = async () => {\n      const userId = firebaseAuth.currentUser?.uid;\n      console.log(\"User ID: \", userId);\n      const dataResponse = await firebaseApp\n        .firestore()\n        .collection(\"users\")\n        .doc(userId)\n        .get();\n\n      // get the user data\n      setUserProfile(dataResponse.data());\n      console.log(\"Data Response: \", dataResponse.data);\n    };\n\n    console.log(\"get user profile information...\");\n    loadUserProfile();\n  }, []);\n\n  return (\n    <IonPage>\n      <IonHeader class=\"ion-no-border\">\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton color=\"light\" />\n          </IonButtons>\n          <IonTitle>STUDYPELAGO</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent fullscreen className=\"ion-padding\">\n        <IonButton routerLink={\"/profile\"} color=\"light\">\n          Profile\n        </IonButton>\n\n        <pre>\n          Welcome back, {userProfile?.firstName} {userProfile?.lastName}\n        </pre>\n        <h6>Role: {userProfile?.role}</h6>\n\n        {/* use firebase auth api to get current user, and\n         render the json response */}\n        <pre>{JSON.stringify(userProfile, null, 2)}</pre>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}