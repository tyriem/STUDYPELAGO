{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonButtons,IonContent,IonHeader,IonLoading,IonMenuButton,IonPage,IonTitle,IonToolbar}from\"@ionic/react\";import{useEffect,useState}from\"react\";import{Camera,CameraResultType}from\"@capacitor/camera\";import{firebaseAuth,firebaseStorage}from\"../store/firebase\";import\"./Page.css\";// import img\nimport iconImg from\"../assets/img/user-icon.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfilePage=function ProfilePage(){var _firebaseAuth$current2;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentURL=_useState4[0],setCurrentURL=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),uploading=_useState6[0],setUploading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var takePicture=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var cameraResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Camera.getPhoto({quality:90,allowEditing:true,resultType:CameraResultType.Uri});case 3:cameraResult=_context.sent;// image.webPath will contain a path that can be set as an image src.\n// You can access the original file using image.path, which can be\n// passed to the Filesystem API to read the raw data of the image,\n// if desired (or pass resultType: CameraResultType.Base64 to getPhoto)\nsetImage(cameraResult.webPath);// Can be set to the src of an image now\n//imageElement.src = imageUrl;\nconsole.log(image);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"ERROR: \",_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function takePicture(){return _ref.apply(this,arguments);};}();var uploadToFirebase=function uploadToFirebase(){var _firebaseAuth$current;setUploading(true);var fileName=(_firebaseAuth$current=firebaseAuth.currentUser)===null||_firebaseAuth$current===void 0?void 0:_firebaseAuth$current.uid;var imageRef=firebaseStorage().ref(\"/profiles/\".concat(fileName));var task=imageRef.put(selectedFile);var unsub=task.on(firebaseStorage.TaskEvent.STATE_CHANGED,function(snapShot){// IN PROGRESS\nconsole.log(snapShot.bytesTransferred/snapShot.totalBytes);},function(error){// ERROR\nconsole.log(error);},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return task.snapshot.ref.getDownloadURL();case 2:url=_context2.sent;setCurrentURL(url);setUploading(false);unsub();case 6:case\"end\":return _context2.stop();}}},_callee2);})));};// get user profile information\nuseEffect(function(){var getUserInfo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(user){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(user){}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function getUserInfo(_x){return _ref3.apply(this,arguments);};}();},[]);return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{class:\"ion-no-border\",children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonMenuButton,{})}),/*#__PURE__*/_jsx(IonTitle,{children:\"Profile\"})]})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,children:[/*#__PURE__*/_jsx(IonHeader,{collapse:\"condense\",children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{size:\"large\",children:\"Profile Page\"})})}),/*#__PURE__*/_jsxs(\"pre\",{children:[\"USER ID: \",(_firebaseAuth$current2=firebaseAuth.currentUser)===null||_firebaseAuth$current2===void 0?void 0:_firebaseAuth$current2.uid]}),/*#__PURE__*/_jsx(\"pre\",{children:\"Profile Picture:\"}),/*#__PURE__*/_jsx(\"img\",{src:iconImg,width:\"100\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"pre\",{children:\"Upload A New Profile Picture:\"}),uploading?/*#__PURE__*/_jsx(IonLoading,{isOpen:uploading,message:\"Uploading File\"}):null,/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(event){setSelectedFile(event.target.files[0]);}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"SELECTED FILE \",selectedFile===null||selectedFile===void 0?void 0:selectedFile.name]}),/*#__PURE__*/_jsx(IonButton,{onClick:function onClick(){return takePicture();},size:\"small\",children:\"TAKE PICTURE\"}),/*#__PURE__*/_jsx(IonButton,{onClick:uploadToFirebase,size:\"small\",children:\"UPLOAD PICTURE\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:currentURL,width:\"200\"})]})]});};export default ProfilePage;","map":{"version":3,"sources":["/Users/tm/Documents/CODE/STUDYPELAGO/src/pages/ProfilePage.tsx"],"names":["IonButton","IonButtons","IonContent","IonHeader","IonLoading","IonMenuButton","IonPage","IonTitle","IonToolbar","useEffect","useState","Camera","CameraResultType","firebaseAuth","firebaseStorage","iconImg","ProfilePage","selectedFile","setSelectedFile","currentURL","setCurrentURL","uploading","setUploading","image","setImage","takePicture","getPhoto","quality","allowEditing","resultType","Uri","cameraResult","webPath","console","log","message","uploadToFirebase","fileName","currentUser","uid","imageRef","ref","task","put","unsub","on","TaskEvent","STATE_CHANGED","snapShot","bytesTransferred","totalBytes","error","snapshot","getDownloadURL","url","getUserInfo","user","event","target","files","name"],"mappings":"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","sourcesContent":["import {\n  IonButton,\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonImg,\n  IonLoading,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n} from \"@ionic/react\";\nimport { useEffect, useState } from \"react\";\nimport { Camera, CameraResultType } from \"@capacitor/camera\";\nimport { firebaseAuth, firebaseApp, firebaseStorage } from \"../store/firebase\";\nimport \"./Page.css\";\n// import img\nimport iconImg from \"../assets/img/user-icon.png\";\n\nconst ProfilePage: React.FC = () => {\n  const [selectedFile, setSelectedFile] = useState<any>(null);\n  const [currentURL, setCurrentURL] = useState<any>(null);\n  const [uploading, setUploading] = useState<any>(false);\n\n  const [image, setImage] = useState<any>(\"\");\n\n  const takePicture = async () => {\n    //Grab the picture with asynchronous threading\n\n    // TRY-CATCH: AWAIT CALL\n    try {\n      const cameraResult = await Camera.getPhoto({\n        quality: 90,\n        allowEditing: true,\n        resultType: CameraResultType.Uri,\n      });\n\n      // image.webPath will contain a path that can be set as an image src.\n      // You can access the original file using image.path, which can be\n      // passed to the Filesystem API to read the raw data of the image,\n      // if desired (or pass resultType: CameraResultType.Base64 to getPhoto)\n      setImage(cameraResult.webPath);\n\n      // Can be set to the src of an image now\n      //imageElement.src = imageUrl;\n      console.log(image);\n    } catch (error) {\n      console.log(\"ERROR: \", error.message);\n    }\n  };\n\n  const uploadToFirebase = () => {\n    setUploading(true);\n    const fileName = firebaseAuth.currentUser?.uid;\n    const imageRef = firebaseStorage().ref(`/profiles/${fileName}`);\n    const task = imageRef.put(selectedFile);\n    const unsub = task.on(\n      firebaseStorage.TaskEvent.STATE_CHANGED,\n      (snapShot) => {\n        // IN PROGRESS\n        console.log(snapShot.bytesTransferred / snapShot.totalBytes);\n      },\n      (error) => {\n        // ERROR\n        console.log(error);\n      },\n      async () => {\n        // COMPLETE\n        const url = await task.snapshot.ref.getDownloadURL();\n        setCurrentURL(url);\n        setUploading(false);\n        unsub();\n      }\n    );\n  };\n\n  // get user profile information\n  useEffect(() => {\n    const getUserInfo = async (user: any) => {\n      if (user) {\n      }\n    };\n  }, []);\n\n  return (\n    <IonPage>\n      <IonHeader class=\"ion-no-border\">\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>Profile</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent fullscreen>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">Profile Page</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <pre>USER ID: {firebaseAuth.currentUser?.uid}</pre>\n        <pre>Profile Picture:</pre>\n        {/* TODO: CODE PROFILE IMAGE REPLACEMENT */}\n        <img src={iconImg} width=\"100\" />\n\n        <br></br>\n        <br></br>\n        <br></br>\n        <pre>Upload A New Profile Picture:</pre>\n        {uploading ? (\n          <IonLoading isOpen={uploading} message=\"Uploading File\"></IonLoading>\n        ) : null}\n        <input\n          type=\"file\"\n          onChange={(event: any) => {\n            setSelectedFile(event.target.files[0]);\n          }}\n        ></input>\n        <p>SELECTED FILE {selectedFile?.name}</p>\n\n        {/* TODO: CODE TAKE PICTURE LINK TO UPLOAD PICTURE FUNC */}\n        {/* ION-BUTTON: Click to Take Picture OR Select Image */}\n        <IonButton onClick={() => takePicture()} size=\"small\">\n          TAKE PICTURE\n        </IonButton>\n\n        <IonButton onClick={uploadToFirebase} size=\"small\">\n          UPLOAD PICTURE\n        </IonButton>\n\n        <br></br>\n        <img src={currentURL} width=\"200\" />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}