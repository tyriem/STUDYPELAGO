{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tm/Documents/CODE/STUDYPELAGO/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonButtons,IonContent,IonHeader,IonLoading,IonMenuButton,IonPage,IonTitle,IonToolbar}from\"@ionic/react\";import{useEffect,useState}from\"react\";import{firebaseAuth,firebaseStorage}from\"../store/firebase\";import\"./Page.css\";// import img\nimport iconImg from\"../assets/img/user-icon.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfilePage=function ProfilePage(){var _firebaseAuth$current2;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentURL=_useState4[0],setCurrentURL=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),uploading=_useState6[0],setUploading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var uploadToFirebase=function uploadToFirebase(){var _firebaseAuth$current;setUploading(true);var fileName=(_firebaseAuth$current=firebaseAuth.currentUser)===null||_firebaseAuth$current===void 0?void 0:_firebaseAuth$current.uid;var imageRef=firebaseStorage().ref(\"/profiles/\".concat(fileName));var task=imageRef.put(selectedFile);var unsub=task.on(firebaseStorage.TaskEvent.STATE_CHANGED,function(snapShot){// IN PROGRESS\nconsole.log(snapShot.bytesTransferred/snapShot.totalBytes);},function(error){// ERROR\nconsole.log(error);},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return task.snapshot.ref.getDownloadURL();case 2:url=_context.sent;setCurrentURL(url);setUploading(false);unsub();case 6:case\"end\":return _context.stop();}}},_callee);})));};// get user profile information\nuseEffect(function(){var getUserInfo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(user){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(user){}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function getUserInfo(_x){return _ref2.apply(this,arguments);};}();},[]);return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{class:\"ion-no-border\",children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonMenuButton,{})}),/*#__PURE__*/_jsx(IonTitle,{children:\"Profile\"})]})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,children:[/*#__PURE__*/_jsx(IonHeader,{collapse:\"condense\",children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{size:\"large\",children:\"Profile Page\"})})}),/*#__PURE__*/_jsxs(\"pre\",{children:[\"USER ID: \",(_firebaseAuth$current2=firebaseAuth.currentUser)===null||_firebaseAuth$current2===void 0?void 0:_firebaseAuth$current2.uid]}),/*#__PURE__*/_jsx(\"pre\",{children:\"Profile Picture:\"}),/*#__PURE__*/_jsx(\"img\",{src:iconImg,width:\"100\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"pre\",{children:\"Upload A New Profile Picture:\"}),uploading?/*#__PURE__*/_jsx(IonLoading,{isOpen:uploading,message:\"Uploading File\"}):null,/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:function onChange(event){setSelectedFile(event.target.files[0]);}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"SELECTED FILE \",selectedFile===null||selectedFile===void 0?void 0:selectedFile.name]}),/*#__PURE__*/_jsx(IonButton,{onClick:uploadToFirebase,size:\"small\",children:\"UPLOAD PICTURE\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:currentURL,width:\"200\"})]})]});};export default ProfilePage;","map":{"version":3,"sources":["/Users/tm/Documents/CODE/STUDYPELAGO/src/pages/ProfilePage.tsx"],"names":["IonButton","IonButtons","IonContent","IonHeader","IonLoading","IonMenuButton","IonPage","IonTitle","IonToolbar","useEffect","useState","firebaseAuth","firebaseStorage","iconImg","ProfilePage","selectedFile","setSelectedFile","currentURL","setCurrentURL","uploading","setUploading","image","setImage","uploadToFirebase","fileName","currentUser","uid","imageRef","ref","task","put","unsub","on","TaskEvent","STATE_CHANGED","snapShot","console","log","bytesTransferred","totalBytes","error","snapshot","getDownloadURL","url","getUserInfo","user","event","target","files","name"],"mappings":"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","sourcesContent":["import {\n  IonButton,\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonImg,\n  IonLoading,\n  IonMenuButton,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n} from \"@ionic/react\";\nimport { useEffect, useState } from \"react\";\nimport { firebaseAuth, firebaseApp, firebaseStorage } from \"../store/firebase\";\nimport \"./Page.css\";\n// import img\nimport iconImg from \"../assets/img/user-icon.png\";\n\nconst ProfilePage: React.FC = () => {\n  const [selectedFile, setSelectedFile] = useState<any>(null);\n  const [currentURL, setCurrentURL] = useState<any>(null);\n  const [uploading, setUploading] = useState<any>(false);\n\n  const [image, setImage] = useState<any>(\"\");\n\n  const uploadToFirebase = () => {\n    setUploading(true);\n    const fileName = firebaseAuth.currentUser?.uid;\n    const imageRef = firebaseStorage().ref(`/profiles/${fileName}`);\n    const task = imageRef.put(selectedFile);\n    const unsub = task.on(\n      firebaseStorage.TaskEvent.STATE_CHANGED,\n      (snapShot) => {\n        // IN PROGRESS\n        console.log(snapShot.bytesTransferred / snapShot.totalBytes);\n      },\n      (error) => {\n        // ERROR\n        console.log(error);\n      },\n      async () => {\n        // COMPLETE\n        const url = await task.snapshot.ref.getDownloadURL();\n        setCurrentURL(url);\n        setUploading(false);\n        unsub();\n      }\n    );\n  };\n\n  // get user profile information\n  useEffect(() => {\n    const getUserInfo = async (user: any) => {\n      if (user) {\n      }\n    };\n  }, []);\n\n  return (\n    <IonPage>\n      <IonHeader class=\"ion-no-border\">\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle>Profile</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent fullscreen>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">Profile Page</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <pre>USER ID: {firebaseAuth.currentUser?.uid}</pre>\n        <pre>Profile Picture:</pre>\n        {/* TODO: CODE PROFILE IMAGE REPLACEMENT */}\n        <img src={iconImg} width=\"100\" />\n\n        <br></br>\n        <br></br>\n        <br></br>\n        <pre>Upload A New Profile Picture:</pre>\n        {uploading ? (\n          <IonLoading isOpen={uploading} message=\"Uploading File\"></IonLoading>\n        ) : null}\n        {/* INPUT: IMAGE UPLOAD */}\n        <input\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={(event: any) => {\n            setSelectedFile(event.target.files[0]);\n          }}\n        ></input>\n        <p>SELECTED FILE {selectedFile?.name}</p>\n\n        <IonButton onClick={uploadToFirebase} size=\"small\">\n          UPLOAD PICTURE\n        </IonButton>\n\n        <br></br>\n        <img src={currentURL} width=\"200\" />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}